{{#section 'functionality'}}
  {{#each sess.functionalityProfile}}
    <li><a href="{{Action}}"><i class="fa {{Icon}}"></i> {{Name}} </a></li>
  {{/each}}
{{/section}}

<div class="panel panel-primary">
  <div class="panel-heading">Approve</div>
  <div class="panel-body">
    <div class="row">
      <div class="col-sm-9">

      </div>
      <div class="col-sm-3 text-right" style="margin-bottom:5px;">
        <span class="label label-danger" onclick="setEventToApprove(2);">Cancel</span>
        <span class="label label-success" onclick="setEventToApprove(4);">Approve</span>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <table class="table table-hover table-striped">
          <thead>
            <tr>
              <th>Event Number</th>
              <th>Type</th>
              <th>Creator</th>
              <th>Responsible</th>
              <th>Start</th>
              <th>End</th>
              <th>Event Name</th>
              <th>More Info</th>
              <th>Approve <input type="checkbox" name="markAllCB" id="markAllCB" onclick="toggleCheckBox(this);"></th>
            </tr>
          </thead>
          <tbody>
            {{#each allEventToApprove}}
              <tr data-event-code="{{EventCode}}">
                <td class="text-center">{{EventCode}}</td>
                <td>{{Type}}</td>
                <td>{{CreatedByName}}</td>
                <td>{{ResponsibleByName}}</td>
                <td class="text-center">{{start}}</td>
                <td class="text-center">{{end}}</td>
                <td>{{title}}</td>
                <td style="text-align:center;">
                  <i class="fa fa-search-plus" aria-hidden="true"></i>
                </td>
                <td style="text-align:center;">
                  <input class="checkboxToApprove" type="checkbox" name="toApprove" value="{{EventCode}}">
                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<form action="/approve/approve-event" method="post" id="approveEvent">
  <input type="checkbox" name="qwe" value="123" checked>
</form>

{{#section 'script'}}
  <script type="text/javascript">
  function toggleCheckBox(source) {
    checkboxes = document.getElementsByName('toApprove');
    for(checkbox in checkboxes)
      checkboxes[checkbox].checked = source.checked;
  }

  function setEventToApprove(status){
    $('#approveEvent').empty()
    $('.checkboxToApprove:checkbox:checked').each(function(e){
      $('<input />', {
        type: 'checkbox',
        checked : "checked",
        value: this.value,
        name: 'selectedEvent'}).appendTo('#approveEvent');
    })
    $('#approveEvent').submit()
  }

  </script>
{{/section}}
